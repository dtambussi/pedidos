{% import _self as menuMacro %}
{% extends 'PedidosBundle:layout:layout.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <style>
        .menu-item-nombre {
            cursor: pointer;
        }
    </style>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script>
        $("document").ready(function () {
            $(".menu-item-nombre").bind("click", function () {
                console.log("Clicked!");
                var itemMenuId = this.id;
                loadHTMLContentOn(
                        "{{ path("_pedido_item") }}?pedido_item_id=" + itemMenuId,
                        $("#pedido-item-modal-body-div"),
                        function() {
                            $("#pedidoItemModal").modal();
                        }
                );
            });
        });
    </script>
{% endblock %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <h1>Menú</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <div class="row">
                    <div class="col-xs-12">
                        <h2>Entradas</h2>
                        {{ menuMacro.generarListaItemsDeMenu(itemsByCategoriaDto.entradaItems) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <h2>Platos Principales</h2>
                        {{ menuMacro.generarListaItemsDeMenu(itemsByCategoriaDto.platoPrincipalItems) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <h2>Postres</h2>
                        {{ menuMacro.generarListaItemsDeMenu(itemsByCategoriaDto.postreItems) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <h2>Cafetería</h2>
                        {{ menuMacro.generarListaItemsDeMenu(itemsByCategoriaDto.cafeteriaItems) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <h2>Bebidas</h2>
                        {{ menuMacro.generarListaItemsDeMenu(itemsByCategoriaDto.bebidaItems) }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="pedidoItemModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Modal title</h4>
                </div>
                <div class="modal-body" id="pedido-item-modal-body-div">
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% macro generarListaItemsDeMenu(listaItems) %}
    {% for item in listaItems %}
        <div class="row">
            <div class="col-xs-10 menu-item-nombre" id="{{ item.id }}">
                {{ item.nombre }}<br>
                <span style="color:grey;font-size: small">{{ item.descripcion }}</span>
            </div>
            <div class="col-xs-2 text-right">
                ${{ item.precio }}
            </div>
        </div>
    {% endfor %}
{% endmacro %}